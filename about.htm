<!DOCTYPE html>
<html>

<head>
  <title>Control Center Products</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

  <script src="https://unpkg.com/popper.js@1.14.7/dist/umd/popper.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

 <!--Everything below this is the loading icon-->
 <script>
  //paste this code under the head tag or in a separate js file.
  // Wait for window load
  $(window).load(function() {
  // Animate loader off screen
  $(".se-pre-con").fadeOut("slow");;
  });
  </script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.js"></script>
  <script>
  //paste this code under the head tag or in a separate js file.
	// Wait for window load
	$(window).load(function() {
	// Animate loader off screen
	$(".se-pre-con").fadeOut("slow");;
	});
  </script>

  <link rel="stylesheet" type="text/css" href="./css/mobile.css">
    
</head>

<body>  
  <div class="se-pre-con"></div>
  <div class="popover bottom in" role="tooltip" id="popover">
    <div class="arrow" style="top: 50%;"></div>
    <div class="popover-content"></div>
  </div>

  <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
      <a class="navbar-brand text-primary" href="#">DoubleHelix</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <script src="./scripts/nav-bar.js?id=index" id="nav-bar"></script>
        <form class="form-inline my-2 my-lg-0">
          <input class="form-control mr-sm-2" id="navInput" type="search" placeholder="Find a DNA Feature.." aria-label="Search">
        </form>
        <script type="text/javascript" src="./scripts/navSearch.js"></script>
      </div>
    </nav>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <div id="content"></div>
  <div class="spinner-border text-primary d-flex justify-content-center mt-2" style="margin-left:auto; margin-right:auto; position: relative; top: 100px;" role="status">
    <span class="sr-only">Loading...</span>
  </div>

  <script id="test-template" type="text/x-handlebars-template"><!--This duplicates the entry below-->
            <div class="entry" style="display: block; position:relative; top:60px;">
              <div class="container">
                <div class="row">
                  <div class="col-12">

                      <div class="accordion" id="accordionExample">
                          <div class="card">
                            <div class="card-header" id="headingOne">
                              <h2 class="mb-0">
                                <button class="btn btn-link col-12 collapsedTrigger" type="button">
                                  {{title}}
                                </button>
                              </h2>
                            </div>
                            <div class="collapsedContainer" style="display: none;" aria-labelledby="headingOne">
                              <div class="card-body">
                                  <div class="card-group">
                                      <div class="card border-primary mb-3">
                                        <div class="card-header text-primary">{{title}}</div>
                                          <div class="card-body text-dark">
                                            <h5 class="card-title">About this tool</h5>
                                            <p class="card-text text-dark ml-4">{{about}}}</p>
                                          </div>
                                        <div class="card-footer bg-transparent border-success"><a href="./{{link}}">Go to Page</a></div>
                                      </div>
                    
                    
                                    </div><!--End Card Group-->

                              </div><!--End card card-body-->
                            </div>
                          </div>

                        </div>
                  </div><!--End card card-body-->
                </div><!--End collapse col-12" id="{{class}}-->
                </div><!--End Row-->
              </div><!--End Container-->
            </div><!--End Entry-->

    </script>

  <!-- Don't need jQuery for Tabletop, but using it for this example -->
  <script type="text/javascript" src="./scripts/handlebars.js"></script>
  <script type="text/javascript" src="./scripts/jquery.js"></script>
  <script type="text/javascript" src="./scripts/tabletop.js"></script>
  <script type="text/javascript" src="./scripts/dropDown.js"></script>
  <script type="text/javascript">
    var public_spreadsheet_url = 'https://docs.google.com/a/dealer.com/spreadsheets/d/1oHFibPwVV44St1mgLDIcVsPVniH9ljLfdHg5t4Sr6qY/pub?hl=en_US&hl=en_US&hl=en_US&output=html';

    $(document).ready(function () {
      Tabletop.init({
        key: public_spreadsheet_url,
        callback: showInfo,
        parseNumbers: true
      });
    });

    function showInfo(data, tabletop) {
      var source = $("#test-template").html();
      var template = Handlebars.compile(source);

      $.each(tabletop.sheets("aboutMain").all(), function (i, cat) {
        console.log(cat);
        var html = template(cat);
        $("#content").append(html);
      });
      $('.collapsedTrigger').on('click', function (event) {
        hideAllAccordians();
        var parent = $(this).closest('.accordion');
        if (parent) {
          var collapsed = parent.find('.collapsedContainer');
          if (collapsed.css('display') === 'none') {
            collapsed.slideDown(250);
          }
        }
      });
      $('[data-toggle="popover"]').on('mouseenter', function () {
        var popper = $('#popover');
        popper.show()
        var data = $(this).data();
        popper.css('z-index', 9999);
        popper.css('padding', 10);
        popper.find('.popover-content').text(data.content);
        var x = new Popper($(this), popper);
      })

      $('[data-toggle="popover"]').on('mouseleave', function () {
        var popper = $('#popover');
        popper.hide()
        popper.find('.popper-content').text('');
      });


    }

    var hideAllAccordians = function () {
      var accordions = $('.collapsedContainer');
      if (accordions && accordions.length > 0) {
        accordions.each(function (index) {
          var display = $(this).css('display');
          if (!display || display.length === 0 || display === 'block') {
            $(this).slideUp(250);
          }
        });
      }
    }

    $('[data-toggle]').popover();
  </script>
</body>

</html>